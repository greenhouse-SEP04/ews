; PlatformIO Project Configuration File

[env:target_run]
platform    = atmelavr
board       = megaatmega2560
framework   = arduino
; (your main firmware build)

[env:target_test]
platform    = atmelavr
board       = megaatmega2560
framework   = arduino
build_flags = -D TARGET_TEST=1
lib_deps    = throwtheswitch/Unity@^2.5.2
test_filter = test_target_*    ; runs all your target-side Unity tests

; ——————————————————————————————————————————————————————————
; Native (host) test envs: only compile mocks + tests, skip drivers/src
; ——————————————————————————————————————————————————————————

[env:win_test]
platform    = native
lib_deps    = throwtheswitch/Unity@^2.5.2
build_flags = -D WINDOWS_TEST=1
test_filter = test_win_wifi     ; adjust per‐env if needed
src_filter  = +<test/*> +<lib/Mocks/*> -<lib/drivers/*> -<src/*>

[env:win_test_wifi]
platform    = native
lib_deps    = throwtheswitch/Unity@^2.5.2
build_flags = -DWINDOWS_TEST -DEXCLUDE_UART
test_filter = test_win_wifi
src_filter  = +<test/*> +<lib/Mocks/*> -<lib/drivers/*> -<src/*>

[env:win_test_pc_comm]
platform    = native
lib_deps    = throwtheswitch/Unity@^2.5.2
build_flags = -DWINDOWS_TEST -DEXCLUDE_UART
test_filter = test_win_pc_comm
src_filter  = +<test/*> +<lib/Mocks/*> -<lib/drivers/*> -<src/*>

[env:win_test_light]
platform    = native
lib_deps    = throwtheswitch/Unity@^2.5.2
build_flags = -DWINDOWS_TEST -DEXCLUDE_UART
test_filter = test_win_light
src_filter  = +<test/*> +<lib/Mocks/*> -<lib/drivers/*> -<src/*>
